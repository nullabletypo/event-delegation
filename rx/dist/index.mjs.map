{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import { fromEventPattern, Observable, queueScheduler } from 'rxjs'\nimport { share, observeOn } from 'rxjs/operators'\nimport { delegate as _delegate, EventDelegatorOptions as Opts, EventHandler } from 'event-delegation'\n\ntype Type = keyof HTMLElementEventMap\n\nexport interface EventSelector {\n  <T extends Event>(type: Type, opts?: Opts): Observable<T>\n  <T extends Event>(type: string, opts?: Opts): Observable<T>\n  <T extends Event>(type: Type, sel: string, opts?: Opts): Observable<T>\n  <T extends Event>(type: string, sel: string, opts?: Opts): Observable<T>\n}\n\nexport function delegate(target: EventTarget, options?: Opts): EventSelector {\n  const del = _delegate(target, options)\n  return function select<T extends Event>(type: string, a: any, b?: any) {\n    const [sel, opts] = typeof a === 'string' ? [a, b] : [undefined, b]\n    const add = (next: EventHandler) => del.on(type, sel, next, opts)\n    const remove = (next: EventHandler) => del.off(type, next, opts)\n    return fromEventPattern<T>(add, remove).pipe(\n      observeOn(queueScheduler),\n      share(),\n    )\n  }\n}\n"],"names":["delegate","target","options","del","_delegate","select","type","a","b","undefined","sel","opts","add","next","on","remove","off","fromEventPattern","pipe","observeOn","queueScheduler","share"],"mappings":";;;;SAagBA,WAASC,QAAqBC;MACtCC,GAAG,GAAGC,QAAS,CAACH,MAAD,EAASC,OAAT,CAArB;;SACO,SAASG,MAAT,CAAiCC,IAAjC,EAA+CC,CAA/C,EAAuDC,CAAvD;cACe,OAAOD,CAAP,KAAa,QAAb,GAAwB,CAACA,CAAD,EAAIC,CAAJ,CAAxB,GAAiC,CAACC,SAAD,EAAYD,CAAZ;IAA9CE;IAAKC;;QACNC,GAAG,aAAIC,eAAuBV,GAAG,CAACW,EAAJ,CAAOR,IAAP,EAAaI,GAAb,EAAkBG,IAAlB,EAAwBF,IAAxB,IAApC;;QACMI,MAAM,aAAIF,eAAuBV,GAAG,CAACa,GAAJ,CAAQV,IAAR,EAAcO,IAAd,EAAoBF,IAApB,IAAvC;;WACOM,gBAAgB,CAAIL,GAAJ,EAASG,MAAT,CAAhB,CAAiCG,IAAjC,CACLC,SAAS,CAACC,cAAD,CADJ,EAELC,KAAK,EAFA,CAAP;GAJF;;;;;"}